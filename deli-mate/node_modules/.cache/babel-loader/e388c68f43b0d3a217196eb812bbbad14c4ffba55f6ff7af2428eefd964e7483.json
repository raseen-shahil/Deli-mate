{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\QWERTY\\\\Downloads\\\\deli-mate-main\\\\deli-mate-main\\\\src\\\\page\\\\Order.jsx\",\n  _s = $RefreshSig$();\nimport { collection, doc, onSnapshot, query, where } from \"firebase/firestore\";\nimport React, { useRef, useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Booking from \"../components/Booking/Booking\";\nimport Review from \"../components/Review/Review\";\nimport SelfReview from \"../components/SelfReview/SelfReview\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { getDataId } from \"../dataManagement\";\nimport { db } from \"../firebase-config\";\nimport ReactLoading from \"react-loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet height;\nfunction Order() {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [reviews, setReviews] = useState([]);\n  const [sid, setSid] = useState(\"\");\n  const getName = async id => {\n    const dt = await getDataId(\"users\", id);\n    dt && setName(dt.name);\n    dt && setImg(dt.pic);\n    dt && setAddress(dt.address);\n  };\n  useEffect(() => {\n    let unsub;\n    try {\n      unsub = onSnapshot(doc(db, \"Foodlistings\", id), docs => {\n        if (!docs.data()) {\n          navigate(\"*\");\n        }\n        setSid(docs.data().user_Id);\n        setData({\n          id: docs.id,\n          ...docs.data()\n        });\n        getName(docs.data().user_Id);\n      });\n    } catch (e) {\n      console.log(e);\n    }\n    return unsub;\n  }, []);\n  useEffect(() => {\n    let unsub;\n    if (sid) {\n      const q = query(collection(db, \"reviews\"), where(\"sid\", \"==\", sid));\n      unsub = onSnapshot(q, snapshot => {\n        const List = [];\n        snapshot.docs.forEach(doc => {\n          List.push({\n            uid: doc.data().user_Id,\n            id: doc.id,\n            ...doc.data()\n          });\n          setReviews(List);\n        });\n      }, error => {\n        console.log(error);\n      });\n    }\n    return unsub;\n  }, [sid]);\n  const [repClick, setRipClick] = useState(false);\n  const [bk, setBk] = useState(false);\n  const [data, setData] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [img, setImg] = useState(\"\");\n  bk || repClick ? height = \"bg-height\" : height = \"null\";\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: `order ${height}`,\n    children: [!data && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-login\",\n      children: /*#__PURE__*/_jsxDEV(ReactLoading, {\n        type: \"spin\",\n        color: \"rgb(100, 140, 127)\",\n        height: \"10%\",\n        width: \"10%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), data && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Booking\",\n      children: /*#__PURE__*/_jsxDEV(Booking, {\n        setRepClick: setRipClick,\n        repClick: repClick,\n        price: data.price,\n        qty: Number(data.qty),\n        nQty: Number(data.nQty),\n        type: data.type,\n        sid: data.user_Id,\n        nPrice: data.nPrice,\n        name: name,\n        pic: img,\n        id: data.id,\n        address: address,\n        setBk: setBk\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), data && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviews\",\n      children: reviews.map(elt => {\n        return /*#__PURE__*/_jsxDEV(Review, {\n          msg: elt.msg,\n          id: elt.id,\n          uid: elt.user_Id,\n          date: elt.time,\n          rate: elt.rate\n        }, elt.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), sid !== currentUser.uid && data && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviewing\",\n      children: /*#__PURE__*/_jsxDEV(SelfReview, {\n        sid: data.user_Id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(Order, \"OTr7Ram8yI1UHU8LSwt26CkakwQ=\", false, function () {\n  return [useAuth, useParams, useNavigate];\n});\n_c = Order;\nexport default Order;\nvar _c;\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"names":["collection","doc","onSnapshot","query","where","React","useRef","useState","useEffect","useNavigate","useParams","Booking","Review","SelfReview","useAuth","getDataId","db","ReactLoading","height","Order","currentUser","id","navigate","reviews","setReviews","sid","setSid","getName","dt","setName","name","setImg","pic","setAddress","address","unsub","docs","data","user_Id","setData","e","console","log","q","snapshot","List","forEach","push","uid","error","repClick","setRipClick","bk","setBk","img","price","Number","qty","nQty","type","nPrice","map","elt","msg","time","rate"],"sources":["C:/Users/QWERTY/Downloads/deli-mate-main/deli-mate-main/src/page/Order.jsx"],"sourcesContent":["import { collection, doc, onSnapshot, query, where } from \"firebase/firestore\";\nimport React, { useRef, useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Booking from \"../components/Booking/Booking\";\nimport Review from \"../components/Review/Review\";\nimport SelfReview from \"../components/SelfReview/SelfReview\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { getDataId } from \"../dataManagement\";\nimport { db } from \"../firebase-config\";\nimport ReactLoading from \"react-loading\";\n\nlet height;\n\nfunction Order() {\n  const { currentUser } = useAuth();\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [reviews, setReviews] = useState([]);\n  const [sid, setSid] = useState(\"\");\n\n  const getName = async (id) => {\n    const dt = await getDataId(\"users\", id);\n    dt && setName(dt.name);\n    dt && setImg(dt.pic);\n    dt && setAddress(dt.address);\n  };\n\n  useEffect(() => {\n    let unsub;\n    try {\n      unsub = onSnapshot(doc(db, \"Foodlistings\", id), (docs) => {\n        if (!docs.data()) {\n          navigate(\"*\");\n        }\n        setSid(docs.data().user_Id);\n        setData({ id: docs.id, ...docs.data() });\n        getName(docs.data().user_Id);\n      });\n    } catch (e) {\n      console.log(e);\n    }\n    return unsub;\n  }, []);\n\n  useEffect(() => {\n    let unsub;\n    if (sid) {\n      const q = query(collection(db, \"reviews\"), where(\"sid\", \"==\", sid));\n      unsub = onSnapshot(\n        q,\n        (snapshot) => {\n          const List = [];\n          snapshot.docs.forEach((doc) => {\n            List.push({ uid: doc.data().user_Id, id: doc.id, ...doc.data() });\n            setReviews(List);\n          });\n        },\n        (error) => {\n          console.log(error);\n        }\n      );\n    }\n\n    return unsub;\n  }, [sid]);\n\n  const [repClick, setRipClick] = useState(false);\n  const [bk, setBk] = useState(false);\n  const [data, setData] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [img, setImg] = useState(\"\");\n  bk || repClick ? (height = \"bg-height\") : (height = \"null\");\n  return (\n    <section className={`order ${height}`}>\n      {!data && (\n        <div className=\"loading-login\">\n          <ReactLoading\n            type={\"spin\"}\n            color={\"rgb(100, 140, 127)\"}\n            height={\"10%\"}\n            width={\"10%\"}\n          />\n        </div>\n      )}\n      {data && (\n        <div className=\"Booking\">\n          <Booking\n            setRepClick={setRipClick}\n            repClick={repClick}\n            price={data.price}\n            qty={Number(data.qty)}\n            nQty={Number(data.nQty)}\n            type={data.type}\n            sid={data.user_Id}\n            nPrice={data.nPrice}\n            name={name}\n            pic={img}\n            id={data.id}\n            address={address}\n            setBk={setBk}\n          />\n        </div>\n      )}\n      {data && (\n        <div className=\"reviews\">\n          {reviews.map((elt) => {\n            return (\n              <Review\n                msg={elt.msg}\n                id={elt.id}\n                uid={elt.user_Id}\n                date={elt.time}\n                rate={elt.rate}\n                key={elt.id}\n              />\n            );\n          })}\n        </div>\n      )}\n      {sid !== currentUser.uid && data && (\n        <div className=\"reviewing\">\n          <SelfReview sid={data.user_Id} />\n        </div>\n      )}\n    </section>\n  );\n}\n\nexport default Order;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}