{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\QWERTY\\\\Downloads\\\\deli-mate-main\\\\deli-mate-main\\\\src\\\\contexts\\\\AuthContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createUserWithEmailAndPassword, onAuthStateChanged, sendPasswordResetEmail, signInWithEmailAndPassword, updateEmail, updatePassword, signOut } from \"firebase/auth\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { getDataId } from \"../dataManagement\";\nimport { auth } from \"../firebase-config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext();\nexport function useAuth() {\n  _s();\n  return useContext(AuthContext);\n}\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function AuthProvider(_ref) {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const [currentUser, setCurrentUser] = useState();\n  const [loading, setLoading] = useState(true);\n  const [role, setRole] = useState(\"\");\n  function signup(email, password) {\n    return createUserWithEmailAndPassword(auth, email, password);\n  }\n  function login(email, password) {\n    return signInWithEmailAndPassword(auth, email, password);\n  }\n  function logout() {\n    return signOut(auth);\n  }\n  function resetPassword(email) {\n    return sendPasswordResetEmail(auth, email);\n  }\n  function updateUserEmail(email) {\n    return updateEmail(auth.currentUser, email);\n  }\n  function updateUserPassword(password) {\n    return updatePassword(auth.currentUser, password);\n  }\n  function emailUpdate(email) {\n    return updateEmail(auth.currentUser, email);\n  }\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      setCurrentUser(user);\n      user && call(user);\n      setLoading(false);\n    });\n    const call = async user => {\n      const dt = await getDataId(\"users\", user.uid);\n      dt && setRole(dt.rBusiness);\n    };\n    return unsubscribe;\n  }, []);\n  const value = {\n    currentUser,\n    role,\n    login,\n    signup,\n    logout,\n    resetPassword,\n    updateUserEmail,\n    updateUserPassword,\n    emailUpdate\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s2(AuthProvider, \"cqXjgURx1Rownf+S2Lg4MtBnk4c=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createUserWithEmailAndPassword","onAuthStateChanged","sendPasswordResetEmail","signInWithEmailAndPassword","updateEmail","updatePassword","signOut","React","useContext","useState","useEffect","getDataId","auth","AuthContext","createContext","useAuth","AuthProvider","children","currentUser","setCurrentUser","loading","setLoading","role","setRole","signup","email","password","login","logout","resetPassword","updateUserEmail","updateUserPassword","emailUpdate","unsubscribe","user","call","dt","uid","rBusiness","value"],"sources":["C:/Users/QWERTY/Downloads/deli-mate-main/deli-mate-main/src/contexts/AuthContext.jsx"],"sourcesContent":["import {\n  createUserWithEmailAndPassword,\n  onAuthStateChanged,\n  sendPasswordResetEmail,\n  signInWithEmailAndPassword,\n  updateEmail,\n  updatePassword,\n  signOut,\n} from \"firebase/auth\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { getDataId } from \"../dataManagement\";\nimport { auth } from \"../firebase-config\";\n\nconst AuthContext = React.createContext();\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState();\n  const [loading, setLoading] = useState(true);\n  const [role, setRole] = useState(\"\");\n\n  function signup(email, password) {\n    return createUserWithEmailAndPassword(auth, email, password);\n  }\n\n  function login(email, password) {\n    return signInWithEmailAndPassword(auth, email, password);\n  }\n\n  function logout() {\n    return signOut(auth);\n  }\n\n  function resetPassword(email) {\n    return sendPasswordResetEmail(auth, email);\n  }\n\n  function updateUserEmail(email) {\n    return updateEmail(auth.currentUser, email);\n  }\n\n  function updateUserPassword(password) {\n    return updatePassword(auth.currentUser, password);\n  }\n\n  function emailUpdate(email) {\n    return updateEmail(auth.currentUser, email);\n  }\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setCurrentUser(user);\n      user && call(user);\n      setLoading(false);\n    });\n\n    const call = async (user) => {\n      const dt = await getDataId(\"users\", user.uid);\n      dt && setRole(dt.rBusiness);\n    };\n\n    return unsubscribe;\n  }, []);\n\n  const value = {\n    currentUser,\n    role,\n    login,\n    signup,\n    logout,\n    resetPassword,\n    updateUserEmail,\n    updateUserPassword,\n    emailUpdate,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":";;;AAAA,SACEA,8BAA8B,EAC9BC,kBAAkB,EAClBC,sBAAsB,EACtBC,0BAA0B,EAC1BC,WAAW,EACXC,cAAc,EACdC,OAAO,QACF,eAAe;AACtB,OAAOC,KAAK,IAAIC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC9D,SAASC,SAAS,QAAQ,mBAAmB;AAC7C,SAASC,IAAI,QAAQ,oBAAoB;AAAC;AAE1C,MAAMC,WAAW,gBAAGN,KAAK,CAACO,aAAa,EAAE;AAEzC,OAAO,SAASC,OAAO,GAAG;EAAA;EACxB,OAAOP,UAAU,CAACK,WAAW,CAAC;AAChC;AAAC,GAFeE,OAAO;AAIvB,OAAO,SAASC,YAAY,OAAe;EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC;EACvC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,EAAE;EAChD,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACa,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAEpC,SAASe,MAAM,CAACC,KAAK,EAAEC,QAAQ,EAAE;IAC/B,OAAO1B,8BAA8B,CAACY,IAAI,EAAEa,KAAK,EAAEC,QAAQ,CAAC;EAC9D;EAEA,SAASC,KAAK,CAACF,KAAK,EAAEC,QAAQ,EAAE;IAC9B,OAAOvB,0BAA0B,CAACS,IAAI,EAAEa,KAAK,EAAEC,QAAQ,CAAC;EAC1D;EAEA,SAASE,MAAM,GAAG;IAChB,OAAOtB,OAAO,CAACM,IAAI,CAAC;EACtB;EAEA,SAASiB,aAAa,CAACJ,KAAK,EAAE;IAC5B,OAAOvB,sBAAsB,CAACU,IAAI,EAAEa,KAAK,CAAC;EAC5C;EAEA,SAASK,eAAe,CAACL,KAAK,EAAE;IAC9B,OAAOrB,WAAW,CAACQ,IAAI,CAACM,WAAW,EAAEO,KAAK,CAAC;EAC7C;EAEA,SAASM,kBAAkB,CAACL,QAAQ,EAAE;IACpC,OAAOrB,cAAc,CAACO,IAAI,CAACM,WAAW,EAAEQ,QAAQ,CAAC;EACnD;EAEA,SAASM,WAAW,CAACP,KAAK,EAAE;IAC1B,OAAOrB,WAAW,CAACQ,IAAI,CAACM,WAAW,EAAEO,KAAK,CAAC;EAC7C;EAEAf,SAAS,CAAC,MAAM;IACd,MAAMuB,WAAW,GAAGhC,kBAAkB,CAACW,IAAI,EAAGsB,IAAI,IAAK;MACrDf,cAAc,CAACe,IAAI,CAAC;MACpBA,IAAI,IAAIC,IAAI,CAACD,IAAI,CAAC;MAClBb,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC;IAEF,MAAMc,IAAI,GAAG,MAAOD,IAAI,IAAK;MAC3B,MAAME,EAAE,GAAG,MAAMzB,SAAS,CAAC,OAAO,EAAEuB,IAAI,CAACG,GAAG,CAAC;MAC7CD,EAAE,IAAIb,OAAO,CAACa,EAAE,CAACE,SAAS,CAAC;IAC7B,CAAC;IAED,OAAOL,WAAW;EACpB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,KAAK,GAAG;IACZrB,WAAW;IACXI,IAAI;IACJK,KAAK;IACLH,MAAM;IACNI,MAAM;IACNC,aAAa;IACbC,eAAe;IACfC,kBAAkB;IAClBC;EACF,CAAC;EAED,oBACE,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAEO,KAAM;IAAA,UAChC,CAACnB,OAAO,IAAIH;EAAQ;IAAA;IAAA;IAAA;EAAA,QACA;AAE3B;AAAC,IAjEeD,YAAY;AAAA,KAAZA,YAAY;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}